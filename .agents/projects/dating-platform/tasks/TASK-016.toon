task:
 id: TASK-016
 project: dating-platform
 title: Implement GDPR compliance features
 type: backend
 priority: 9
 status: blocked

description:
 summary: Build complete GDPR compliance system for EU users
 details: |
  Implement GDPR requirements:
  - Data Protection Officer role and contact
  - Explicit consent for psychological data (Article 9)
  - Automated data export (right to access)
  - Automated data deletion (right to be forgotten)
  - 30-day retention after account closure
  - Breach notification system (72-hour requirement)
  - Privacy policy and terms of service
  - Cookie consent management
  - Data processing records
  - Third-party processor agreements

acceptance_criteria[10]:
 GET /api/gdpr/export returns complete user data in JSON
 POST /api/gdpr/delete-account initiates deletion workflow
 Account deletion completes after 30-day grace period
 Explicit consent collected for attachment assessment
 Consent tracked in consent_logs table
 Breach detection alerts DPO within 72 hours
 Privacy policy accessible and version-tracked
 Cookie consent banner shown to EU users
 Data processing records maintained
 All third-party processors documented

dependencies:
 required[2]:
  TASK-002
  TASK-004
 blocks[0]:

context:
 files_to_create[10]:
  backend/services/compliance/gdpr.py
  backend/services/compliance/data_export.py
  backend/services/compliance/data_deletion.py
  backend/services/compliance/consent.py
  backend/services/compliance/breach_detection.py
  backend/services/compliance/dpo.py
  backend/services/compliance/tests/test_gdpr.py
  backend/workers/account_deletion.py
  backend/legal/privacy_policy.md
  backend/legal/terms_of_service.md

technical_details:
 stack[3]:
  FastAPI 0.104+
  SQLAlchemy 2.0
  Celery for deletion workflow
 endpoints[6]:
  GET /api/gdpr/export
  POST /api/gdpr/delete-account
  GET /api/gdpr/consent-status
  POST /api/gdpr/consent
  GET /api/legal/privacy-policy
  GET /api/legal/terms-of-service
 gdpr_data_categories[8]:
  Personal identifiable information
  Profile data
  Photos
  Messages
  Attachment assessment results
  Match history
  Payment information
  AI interaction logs

gdpr_requirements:
 article_9: Special category data (psychological assessment)
 right_to_access: Automated data export in JSON format
 right_to_erasure: 30-day deletion workflow
 right_to_portability: Machine-readable export format
 breach_notification: Automated alerts within 72 hours
 dpo_contact: dpo@saltbitter.com

metadata:
 created_by: architect-agent
 created_at: 2025-11-17T17:18:00Z
 estimated_hours: 16
 complexity: high
